<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Fast and Vectorized Base 64 Engine • b64</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Fast and Vectorized Base 64 Engine">
<meta name="description" content="Provides a fast, lightweight, and vectorized base 64 engine to encode and decode character and raw vectors as well as files stored on disk. Common base 64 alphabets are supported out of the box including the standard, URL-safe, bcrypt, crypt, BinHex, and IMAP-modified UTF-7 alphabets. Custom engines can be created to support unique base 64 encoding and decoding needs.">
<meta property="og:description" content="Provides a fast, lightweight, and vectorized base 64 engine to encode and decode character and raw vectors as well as files stored on disk. Common base 64 alphabets are supported out of the box including the standard, URL-safe, bcrypt, crypt, BinHex, and IMAP-modified UTF-7 alphabets. Custom engines can be created to support unique base 64 encoding and decoding needs.">
<meta property="og:image" content="/logo.svg">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">b64</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/extendr/b64/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.svg" class="logo" alt=""><h1 id="b64-">b64 <a class="anchor" aria-label="anchor" href="#b64-"></a>
</h1>
</div>
<!-- badges: start -->

<p>b64 is a dependency, very fast, lightweight, and vectorized base64 encoder and decoder.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install b64 from CRAN with</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"b64"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>Encode to base64 using <code><a href="reference/encode.html">encode()</a></code>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://extendr.github.io/b64/" class="external-link">b64</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">hello</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/encode.html">encode</a></span><span class="op">(</span><span class="st">"Hello, from extendr"</span><span class="op">)</span></span>
<span><span class="va">hello</span></span>
<span><span class="co">#&gt; [1] "SGVsbG8sIGZyb20gZXh0ZW5kcg=="</span></span></code></pre></div>
<p>Decode using <code><a href="reference/encode.html">decode()</a></code>. Note that the returned object will always have the <code>"blob"</code> class. To achieve 0 dependencies, the <code>blob</code> package is only listed as a suggested dependency but if you attach it, its print method will be used.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://blob.tidyverse.org" class="external-link">blob</a></span><span class="op">)</span></span>
<span><span class="va">decoded</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/encode.html">decode</a></span><span class="op">(</span><span class="va">hello</span><span class="op">)</span></span>
<span><span class="va">decoded</span></span>
<span><span class="co">#&gt; &lt;blob[1]&gt;</span></span>
<span><span class="co">#&gt; [1] blob[19 B]</span></span></code></pre></div>
<p>We can convert the decoded base64 to characters and see how it worked.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/rawConversion.html" class="external-link">rawToChar</a></span><span class="op">(</span><span class="va">decoded</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Hello, from extendr"</span></span></code></pre></div>
<div class="section level3">
<h3 id="vectorized">Vectorized<a class="anchor" aria-label="anchor" href="#vectorized"></a>
</h3>
<p>Both <code><a href="reference/encode.html">encode()</a></code> and <code><a href="reference/encode.html">decode()</a></code> are vectorized.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lorem</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="fu">lorem</span><span class="fu">::</span><span class="fu">ipsum</span><span class="op">(</span><span class="fl">5</span>, <span class="fl">1</span>,  <span class="fl">5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">lorem</span></span>
<span><span class="co">#&gt; [1] "Consectetur in sapien interdum diam lobortis eros?"                  </span></span>
<span><span class="co">#&gt; [2] "Lorem sed ligula fames?"                                             </span></span>
<span><span class="co">#&gt; [3] "Adipiscing suscipit magna sapien varius."                            </span></span>
<span><span class="co">#&gt; [4] "Elit tellus taciti turpis hendrerit sagittis."                       </span></span>
<span><span class="co">#&gt; [5] "Sit suspendisse ultrices augue class parturient ultricies venenatis."</span></span>
<span></span>
<span><span class="va">encoded</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/encode.html">encode</a></span><span class="op">(</span><span class="va">lorem</span><span class="op">)</span></span>
<span><span class="va">encoded</span></span>
<span><span class="co">#&gt; [1] "Q29uc2VjdGV0dXIgaW4gc2FwaWVuIGludGVyZHVtIGRpYW0gbG9ib3J0aXMgZXJvcz8="                        </span></span>
<span><span class="co">#&gt; [2] "TG9yZW0gc2VkIGxpZ3VsYSBmYW1lcz8="                                                            </span></span>
<span><span class="co">#&gt; [3] "QWRpcGlzY2luZyBzdXNjaXBpdCBtYWduYSBzYXBpZW4gdmFyaXVzLg=="                                    </span></span>
<span><span class="co">#&gt; [4] "RWxpdCB0ZWxsdXMgdGFjaXRpIHR1cnBpcyBoZW5kcmVyaXQgc2FnaXR0aXMu"                                </span></span>
<span><span class="co">#&gt; [5] "U2l0IHN1c3BlbmRpc3NlIHVsdHJpY2VzIGF1Z3VlIGNsYXNzIHBhcnR1cmllbnQgdWx0cmljaWVzIHZlbmVuYXRpcy4="</span></span></code></pre></div>
<p>We can decode all of these using <code><a href="reference/encode.html">decode()</a></code> as well.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/encode.html">decode</a></span><span class="op">(</span><span class="va">encoded</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;blob[5]&gt;</span></span>
<span><span class="co">#&gt; [1] blob[50 B] blob[23 B] blob[40 B] blob[45 B] blob[68 B]</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="encoding-and-decoding-files">Encoding and decoding files<a class="anchor" aria-label="anchor" href="#encoding-and-decoding-files"></a>
</h2>
<p><code>b64</code> shines when encoding and decoding files. <code><a href="reference/encode.html">encode_file()</a></code> and <code><a href="reference/encode.html">decode_file()</a></code> both work by reading a file as a stream making it far faster than the alternative.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tmp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span> </span>
<span><span class="va">fp</span> <span class="op">&lt;-</span> <span class="st">"https://github.com/extendr/b64/blob/main/src/rust/vendor.tar.xz"</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/download.file.html" class="external-link">download.file</a></span><span class="op">(</span><span class="va">fp</span>, <span class="va">tmp</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">bench</span><span class="fu">::</span><span class="fu">mark</span><span class="op">(</span></span>
<span>  b64 <span class="op">=</span> <span class="fu"><a href="reference/encode.html">encode_file</a></span><span class="op">(</span><span class="va">tmp</span><span class="op">)</span>,</span>
<span>  base64enc <span class="op">=</span> <span class="fu">base64enc</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/base64enc/man/base64.html" class="external-link">base64encode</a></span><span class="op">(</span><span class="va">tmp</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 6</span></span>
<span><span class="co">#&gt;   expression      min   median `itr/sec` mem_alloc `gc/sec`</span></span>
<span><span class="co">#&gt;   &lt;bch:expr&gt; &lt;bch:tm&gt; &lt;bch:tm&gt;     &lt;dbl&gt; &lt;bch:byt&gt;    &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 b64           334µs    340µs     2810.     218KB     0   </span></span>
<span><span class="co">#&gt; 2 base64enc     905µs    938µs     1043.     729KB     4.22</span></span></code></pre></div>
<p>While the encoding is very impressive, better yet is the decoding performance.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create a temp file</span></span>
<span><span class="va">tmp2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># encode it and write to tmep file</span></span>
<span><span class="fu"><a href="reference/encode.html">encode_file</a></span><span class="op">(</span><span class="va">tmp</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/rawConversion.html" class="external-link">charToRaw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/readBin.html" class="external-link">writeBin</a></span><span class="op">(</span><span class="va">tmp2</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">bench</span><span class="fu">::</span><span class="fu">mark</span><span class="op">(</span></span>
<span>  b64 <span class="op">=</span> <span class="fu"><a href="reference/encode.html">decode_file</a></span><span class="op">(</span><span class="va">tmp2</span><span class="op">)</span>,</span>
<span>  base64enc <span class="op">=</span> <span class="fu">base64enc</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/base64enc/man/base64.html" class="external-link">base64decode</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/connections.html" class="external-link">file</a></span><span class="op">(</span><span class="va">tmp2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 6</span></span>
<span><span class="co">#&gt;   expression      min   median `itr/sec` mem_alloc `gc/sec`</span></span>
<span><span class="co">#&gt;   &lt;bch:expr&gt; &lt;bch:tm&gt; &lt;bch:tm&gt;     &lt;dbl&gt; &lt;bch:byt&gt;    &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 b64        107.09µs  122.6µs     7414.     164KB     8.77</span></span>
<span><span class="co">#&gt; 2 base64enc    1.58ms    1.6ms      602.     172KB     3.70</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="alternative-engines">Alternative engines<a class="anchor" aria-label="anchor" href="#alternative-engines"></a>
</h2>
<p>Out of the box, <code>b64</code> provides a number of pre-configured engines that can be used. The function <code><a href="reference/engine.html">engine()</a></code> allows you to choose one of these different engines For example, <code>engine("url_safe")</code> provides a standard engine that uses a url-safe alphabet with padding.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">url_engine</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/engine.html">engine</a></span><span class="op">(</span><span class="st">"url_safe"</span><span class="op">)</span></span>
<span><span class="va">url_safe_encoded</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/encode.html">encode</a></span><span class="op">(</span><span class="st">"\xfa\xec U"</span>, <span class="va">url_engine</span><span class="op">)</span></span>
<span><span class="va">url_safe_encoded</span></span>
<span><span class="co">#&gt; [1] "-uwgVQ=="</span></span></code></pre></div>
<p>If we try to decode this using the standard engine, we will encounter an error.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/encode.html">decode</a></span><span class="op">(</span><span class="va">url_safe_encoded</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in decode_(what, eng): Invalid byte 45, offset 0.</span></span></code></pre></div>
<p>We can use our new engine to decode it.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/encode.html">decode</a></span><span class="op">(</span><span class="va">url_safe_encoded</span>, <span class="va">url_engine</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;blob[1]&gt;</span></span>
<span><span class="co">#&gt; [1] blob[4 B]</span></span></code></pre></div>
<div class="section level3">
<h3 id="custom-engines">Custom Engines<a class="anchor" aria-label="anchor" href="#custom-engines"></a>
</h3>
<p>We can create custom engines with <code><a href="reference/engine.html">new_engine()</a></code>. This allows us to provide our on alphabet and configuration.</p>
<p>We can use one of the many predefined alphabets or create one our selves with <code><a href="reference/alphabet.html">new_alphabet()</a></code>. We can also specify our engine config using <code><a href="reference/new_config.html">new_config()</a></code> which lets us choose whether or not to pad and how to handle decoding.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_eng</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/engine.html">new_engine</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="reference/alphabet.html">alphabet</a></span><span class="op">(</span><span class="st">"crypt"</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="reference/new_config.html">new_config</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="st">"none"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>This engine can be used to encode or decode text.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">txt</span> <span class="op">&lt;-</span> <span class="st">"lorem ipsum sit dolor amet"</span></span>
<span></span>
<span><span class="fu"><a href="reference/encode.html">encode</a></span><span class="op">(</span><span class="va">txt</span>, <span class="va">my_eng</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "P4xmNKoUOL/nRKoUQqZo64FjP4xm643hNLE="</span></span></code></pre></div>
<p>Compare this to the standard encoder:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/encode.html">encode</a></span><span class="op">(</span><span class="va">txt</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "bG9yZW0gaXBzdW0gc2l0IGRvbG9yIGFtZXQ="</span></span></code></pre></div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=b64" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/extendr/b64/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/extendr/b64/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing b64</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Josiah Parry <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-9910-865X" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/extendr/b64/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/extendr/b64/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Josiah Parry.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
